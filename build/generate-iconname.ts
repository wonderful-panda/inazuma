import fs from "node:fs";
import mdi from "@iconify/json/json/mdi.json";
import octicon from "@iconify/json/json/octicon.json";
import HandleBars from "handlebars";

const iconNames = [
  ...Object.keys(mdi.icons).map((name) => `${mdi.prefix}:${name}`),
  ...Object.keys(mdi.aliases).map((name) => `${mdi.prefix}:${name}`),
  ...Object.keys(octicon.icons).map((name) => `${octicon.prefix}:${name}`),
  ...Object.keys(octicon.aliases).map((name) => `${octicon.prefix}:${name}`)
];

const templateSource = `// Generated by build/generate-iconname.ts

export type IconName = (
{{#each iconNames}}
 | "{{.}}"
{{/each}}
);
`;

if (!fs.existsSync("src/react/generated")) {
  fs.mkdirSync("src/react/generated");
}

const template = HandleBars.compile(templateSource);
fs.writeFileSync("src/react/generated/IconName.d.ts", template({ iconNames }));
